from CableOptimization import CableOptimization
from Visualization import visualize, visualize_all

motor_curves = {
    "tmotor2212_780_95": {
        "name": "TMotor MN2212 780KV 16V 9.5\"", "50": [293, 9.43], "65": [476, 8.04], "75": [605, 7.3],
        "85": [742, 6.78], "100": [918, 6.02]
    },
    "holybro2216_920_10": {
        "name": "Holybro AIR2216 920KV 16V 10\"", "30": [210, 9.12], "35": [259, 8.67], "40": [309, 8.45],
        "45": [373, 8.15], "50": [447, 7.76], "55": [536, 7.39], "60": [628, 7.01], "65": [729, 6.73],
        "70": [814, 6.44], "75": [906, 6.18], "80": [993, 5.88], "85": [1087, 5.65], "90": [1191, 5.43],
        "95": [1289, 5.18], "100": [1332, 5.13]
    },
    # "tmotor2806_400_12": {"name": "TMotor MN2806 400KV 24V 12\"", "40": [230, 12.91], "45": [282, 11.93],"50": [344, 11.11], "55": [398, 10.5], "60": [458, 9.83], "65": [511, 9.26], "70": [568, 8.7],"75": [642, 8.33], "80": [705, 7.97], "85": [774, 7.59], "90": [845, 7.24], "95": [915, 6.91],"100": [958, 6.65]},
    "tmotor2806_650_12": {
        "name": "TMotor MN2806 650KV 16V 12\"", "40": [237, 12.66], "45": [314, 11.47], "50": [361, 10.71],
        "55": [438, 9.85], "60": [492, 9.43], "65": [568, 8.78], "70": [631, 8.34], "75": [714, 7.75],
        "80": [772, 7.45], "85": [865, 7.02], "90": [919, 6.73], "95": [999, 6.34], "100": [1036, 6.17]
    },
    # "tmotor2806_400_13": {"name": "TMotor MN2806 400KV 24V 13\"", "40": [262, 12.85], "45": [325, 12.11],"50": [398, 11.24], "55": [458, 10.36], "60": [531, 9.78], "65": [592, 9.26],"70": [660, 8.71], "75": [729, 8.25], "80": [798, 7.86], "85": [875, 7.47], "90": [947, 7.06],"95": [1018, 6.72], "100": [1068, 6.53]},
    "tmotor2806_650_13": {
        "name": "TMotor MN2806 650KV 16V 13\"", "40": [269, 13.16], "45": [346, 11.87], "50": [417, 10.89],
        "55": [485, 10.06], "60": [557, 9.34], "65": [626, 8.78], "70": [700, 8.36], "75": [785, 7.9],
        "80": [863, 7.44], "85": [941, 7.04], "90": [1015, 6.66], "95": [1090, 6.35], "100": [1138, 6.1]
    },
    # "tmotor3110_700_12": {"name": "TMotor MN3110 700KV 16V 12\"", "50": [420, 8.87], "65": [790, 8.61],"75": [930, 7.39], "85": [1190, 6.93], "100": [1290, 6.23]},
    "tmotor3110_780_11": {
        "name": "TMotor MN3110 780KV 16V 11\"", "50": [430, 8.55], "65": [700, 7.28], "75": [880, 6.48],
        "85": [1100, 5.99], "100": [1260, 5.71]
    },
    "tmotor3110_470_15": {
        "name": "TMotor MN3110 470KV 16V 15\"", "50": [460, 14.13], "65": [730, 11.47], "75": [930, 10.14],
        "85": [1100, 9.06], "100": [1220, 8.68]
    },
    "tmotor3510_700_11": {
        "name": "TMotor MN3510 700KV 16V 11\"", "50": [460, 9.71], "65": [710, 8.00], "75": [870, 7.17],
        "85": [1080, 6.63], "100": [1230, 6.39]
    },
    "iflight4214_400_14": {
        "name": "IFlight 4214 400KV 24V 14\"", "50": [863, 9.220], "60": [1267, 8.380], "70": [1705, 7.639],
        "80": [2146, 6.932], "90": [2683, 6.425], "100": [2953, 6.214]
    },
    "tmotor4014_400_15": {
        "name": "TMotor MN4014 400KV 24V 15\"", "50": [1250, 9.88], "65": [1630, 8.07], "75": [1950, 7.32],
        "85": [2370, 6.76], "100": [2620, 6.31]
    }
}

cable = CableOptimization()

cable.set_conductor("aluminium")
cable.drone_mass = 1710
cable.motor_count = 4
cable.flight_height = 30
cable.set_voltage(tether_voltage=75, converter_voltage=20)
cable.insulation_thickness = 0.75
cable.converter_efficiency = 0.9
cable.payload_power = 15
cable.target_velocity = 8.33333333
cable.drag_estimation_parameters = [0.01451, 0.01361, 19.27, 0]

cable.set_motor_curve_dict(motor_curves["holybro2216_920_10"])

visualize(cable)
visualize_all(cable, motor_curves)
